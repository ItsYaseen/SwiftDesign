<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="generator" content="">
  <meta name="theme-color" content="#563d7c">
  <title>Swift - Recruite | Customer Support Executive - Attachments</title>
  <!-- favicons -->
  <link rel="icon" href="img/favicon/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="img/favicon/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="icon" href="img/favicon/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200&display=swap" rel="stylesheet">
  <!-- CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/swiper-bundle.min.css">
  <link rel="stylesheet" href="fonts/remixicon.css">
  <link rel="stylesheet" href="css/fonts.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/mobile-style.css"> 
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

</head>

<body>
  <section id="main-right">
    <div class="container-fluid">
      <div class="row justify-content-center align-items-center">
        <div class="swift-detials text-center d-sm-block d-md-block sw-d-logo" style="background: none;">
              <div class="row">
                <div class="col-md-12">
                  <div class="card-logo pb-sm-4">
                    <img src="images/swift-mb-logo.png" class="img-fluid" alt="">
                  </div>
                </div>
              </div>
          </div>
       </div>
      <div class="row justify-content-center align-items-center">
        <!-- Swift Details -->
        <div class="col-md-4 col-lg-4 p-0 swift-d-none swift-left-column">
          <div class="swift-detials text-center d-none d-lg-block " style="height:100vh">
                <div class="swift-logo">
                  <img src="images/swift-logo.png" class="img-fluid" alt="">
                </div>
             
                <div class="swift-Illustration  swfit-base-font text-white mt-rm-0 p-rm0-5 py-xl-4 mt-xl-5">
                  <img src="images/customer-support-executive-logo.png" class="img-fluid" alt="">
            
                  <p>Onsite</p>              
                  <h1 class="f-size-24 fw-bold">Customer Support Executive</h1>
                  <p>Karachi | Posted on 22/11/2022</p>
                </div>
          </div>
          
        </div>

        <!-- Swift Form -->
        <div class="offset-lg-1 col-lg-7 col-md-8 p-0 swift-right-column">
          <div class="swift-form-job">
            <!-- Progress Bar -->
            <div class="swift-bar m-auto mb-swift">
              <div class="progress" style="height: 10px;">
                <div class="progress-bar pbar-color" role="progressbar" style="width: 100%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
        
            <!-- Job Card With Image -->
           
            <div class="card h-swift-130 jc-radius border-0 mb-3">
              <div class="row g-0">
                <div class="col-md-12">
                  <div class="job-card-img jc-pad">
                    <div class="d-flex align-items-center justify-content-between">
                      <h5 class="card-title jc-title mb-0">Attachments</h5>
                      <img src="images/s-r-customer-support-executive-address-information.png" alt="Image" class="img-fluid">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card border-0 jc-radius mb-3">
              <div class="row g-0">
                <div class="col-md-12">
                  <div class="card-body jc-t-pad">
                  

                    <label for="skills" class="form-label marg-b-0 f-size-14 fw-bold ">Upload and attach files<span class="asterisk">*</span></label>
                    <small id="addSkillsHelp" class="form-text swift-h-text text-muted">Upload and attach files in PDF and Docx format only</small>
                    
                    <div class="swift-upload border-swift-x1 h-swift-130 marg-b-16">
                      <div id="fileDropArea" class="drop-area text-center justify-content-center">
                          
                            <div class="dz-message needsclick">
                              <span class="text text-center">
                              <img src="images/upload-icon.png" alt="Camera" />
                              <strong class="d-block">Click to upload or drag and drop</strong>
                              <p>PDF, Docx (max 6MB)</p>
                              </span>
                            </div>
                          </form>
                        </div>
                    </div>

                    
                    <div id="fileList" class="mt-3"></div>
                  
                  </div>
                </div>
              </div>
            </div>
            <div class="card border-0 jc-radius justify-content-center jc-t-pad h-swift-92 mb-3">
              <div class="row">
                <div class="col-md-12">
                  <div class="d-md-flex justify-content-between">
                    <a href="customer-support-executive-other-info.html"> <button class="border-swift btn-swift-text btn btn-light swift-shadow b-d-size" type="button"><span><i class="bi bi-arrow-left mr-1"></i>Back</span></button></a>
                      <a href="customer-support-executive-congratulations.html">  <button class="border-swift btn-swift-text btn btn-primary swift-shadow theme-color b-d-size text-right" type="button"><span>Continue <i class="bi bi-arrow-right ml-1"></i></span>
                      </button></a>
                    </div>
                </div>
               </div>
              </div>
            </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/swiper-bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script>
    document.addEventListener("DOMContentLoaded", function() {
      var fileList = [];
      var fileDropArea = document.getElementById("fileDropArea");
      var fileListContainer = document.getElementById("fileList");

      // Handle file drop event
      fileDropArea.addEventListener("drop", function(e) {
        e.preventDefault();
        fileDropArea.classList.remove("drag-over");

        var files = e.dataTransfer.files;
        handleFiles(files);
      });

      // Handle file drag over event
      fileDropArea.addEventListener("dragover", function(e) {
        e.preventDefault();
        fileDropArea.classList.add("drag-over");
      });

      // Handle file drag leave event
      fileDropArea.addEventListener("dragleave", function(e) {
        e.preventDefault();
        fileDropArea.classList.remove("drag-over");
      });

      // Handle file selection from file input
      fileDropArea.addEventListener("click", function(e) {
        var fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.multiple = true;
        fileInput.accept = ".doc,.docx,.pdf"; // Only allow .doc, .docx, and .pdf files
        fileInput.addEventListener("change", function() {
          handleFiles(fileInput.files);
        });
        fileInput.click();
      });

      // Handle files for upload
      async function handleFiles(files) {
        for (var i = 0; i < files.length; i++) {
          var file = files[i];
          var fileId = "file-" + Math.random().toString(36).substr(2, 9); // Generate unique ID

          // Check file type
          if (!validateFileType(file)) {
            alert("Please select only DOC, DOCX, or PDF files.");
            continue;
          }

          // Create file item
          var fileItem = document.createElement("div");
          fileItem.classList.add("file-item","border-swift-x1");
          fileItem.id = fileId;

          var fileIcon = document.createElement("img");
          fileIcon.classList.add("file-icon");
          fileIcon.src = "images/upload-file.png"; // Replace with the actual path to your file icon image
          fileItem.appendChild(fileIcon);
          // Create file details
          var fileDetails = document.createElement("div");
          fileDetails.classList.add("file-details");
          fileItem.appendChild(fileDetails);

          // Create file name
          var fileName = document.createElement("span");
          fileName.textContent = file.name;
          fileName.classList.add("f-size-14", "fw-bold", "f-wieght-600");
          fileDetails.appendChild(fileName);

          // Create file size
          var fileSize = document.createElement("span");
          fileSize.textContent = formatFileSize(file.size);
          fileSize.style.display = "block"; // Set the display property to block
          fileDetails.appendChild(fileSize);

          // Create progress bar
          var progressBar = document.createElement("div");
          progressBar.classList.add("file-progress", "progress");
          progressBar.style.backgroundColor = "rgb(220, 53, 69)"; // Set the background color
          var progressValue = document.createElement("div");
          progressValue.classList.add("progress-bar");
          progressBar.appendChild(progressValue);
          fileDetails.appendChild(progressBar);

          // Create delete action
          var deleteAction = document.createElement("img");
          deleteAction.src = "images/upload-delete.png"; // Replace with the actual path to your delete icon image
          deleteAction.classList.add("delete-icon");
          deleteAction.addEventListener("click", function() {
            var parentItem = this.parentNode;
            parentItem.parentNode.removeChild(parentItem);
            var index = fileList.indexOf(fileId);
            if (index !== -1) {
              fileList.splice(index, 1);
            }
          });

          fileItem.appendChild(deleteAction);

          fileListContainer.appendChild(fileItem);

          fileList.push(fileId);

          // Perform file upload here using Fetch API
          try {

            const formData = new FormData();
            formData.append("file", file);

            const response = await fetch("/upload", {
              method: "POST",
              body: formData,
              onProgress: function(event) {
                if (event.lengthComputable) {
                 
                  var progress = (event.loaded / event.total) * 100;
                  progressValue.style.width = progress + "%";
                  progressValue.textContent = progress.toFixed(2) + "%"; // Display progress percentage
                }
              },
            });

            if (response.ok) {
              // Upload completed successfully
              progressBar.style.backgroundColor = "#dc3545";
            } else {
              
              // Upload failed
              progressBar.style.backgroundColor = "#81CA0A";
            }
          } catch (error) {
          
            // Upload failed due to an error
            var progress = (event.loaded / event.total) * 100;
                  progressValue.style.width = progress + "%";
                  progressValue.textContent = progress.toFixed(2) + "%"; // Display progress 
            progressBar.style.backgroundColor = "#dc3545";
            console.error(error);
          }
        }
      }

      // Validate file type
      function validateFileType(file) {
        var allowedExtensions = /(\.doc|\.docx|\.pdf)$/i;
        return allowedExtensions.test(file.name);
      }

      // Format file size
      function formatFileSize(bytes) {
        if (bytes === 0) return "0 Bytes";
        var k = 1024;
        var sizes = ["Bytes", "KB", "MB", "GB", "TB"];
        var i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
      }
    });
  </script>

</body>
</html>